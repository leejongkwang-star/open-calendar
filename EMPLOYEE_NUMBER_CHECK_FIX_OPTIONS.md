# ì§ì›ë²ˆí˜¸ ì¤‘ë³µ í™•ì¸ ìˆ˜ì • ë°©ì•ˆ ì„ íƒ ê°€ì´ë“œ

## ğŸ”´ í˜„ì¬ ë¬¸ì œì 
- React ìƒíƒœ ì—…ë°ì´íŠ¸ íƒ€ì´ë° ë¬¸ì œë¡œ ì¤‘ë³µ í™•ì¸ í›„ì—ë„ "ì¤‘ë³µ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤" ì—ëŸ¬ê°€ ë°œìƒ
- `await` ì´í›„ì—ë„ ìƒíƒœê°€ ì¦‰ì‹œ ë°˜ì˜ë˜ì§€ ì•ŠìŒ

---

## ğŸ“‹ ìˆ˜ì • ë°©ì•ˆ ì„ íƒ

### **ë°©ì•ˆ 1: í•¨ìˆ˜ê°€ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì • (ê¶Œì¥ â­â­â­)**

**ë‚œì´ë„**: â­â­ (ë³´í†µ)  
**íš¨ê³¼**: â­â­â­â­â­ (ì™„ë²½ í•´ê²°)  
**ì¶”ì²œë„**: â­â­â­â­â­

**ì¥ì :**
- ê°€ì¥ í™•ì‹¤í•˜ê³  ì•ˆì „í•œ í•´ê²° ë°©ë²•
- ë¹„ë™ê¸° ìƒíƒœ ë¬¸ì œ ì™„ì „ í•´ê²°
- ê²°ê³¼ë¥¼ ì§ì ‘ í™•ì¸ ê°€ëŠ¥
- ì½”ë“œê°€ ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ì›€

**ë‹¨ì :**
- í•¨ìˆ˜ êµ¬ì¡° ë³€ê²½ í•„ìš”

**ìˆ˜ì • ë²”ìœ„:**
- `checkEmployeeNumberAvailability` í•¨ìˆ˜ ìˆ˜ì •
- `handleSubmit` í•¨ìˆ˜ ìˆ˜ì •

**ì˜ˆìƒ ìˆ˜ì • ì‹œê°„**: 10-15ë¶„

---

### **ë°©ì•ˆ 2: useRefë¡œ ìµœì‹  ìƒíƒœ ì¶”ì **

**ë‚œì´ë„**: â­â­ (ë³´í†µ)  
**íš¨ê³¼**: â­â­â­â­ (ê±°ì˜ ì™„ë²½)  
**ì¶”ì²œë„**: â­â­â­

**ì¥ì :**
- ê¸°ì¡´ í•¨ìˆ˜ êµ¬ì¡° ìœ ì§€
- refë¥¼ í†µí•´ í•­ìƒ ìµœì‹  ê°’ ì ‘ê·¼ ê°€ëŠ¥
- ë¹ ë¥¸ ìˆ˜ì • ê°€ëŠ¥

**ë‹¨ì :**
- refì™€ state ë‘ ê°€ì§€ë¥¼ ê´€ë¦¬í•´ì•¼ í•¨
- ì½”ë“œ ë³µì¡ë„ ì•½ê°„ ì¦ê°€

**ìˆ˜ì • ë²”ìœ„:**
- `useRef` ì¶”ê°€
- `checkEmployeeNumberAvailability` í•¨ìˆ˜ ìˆ˜ì •
- `handleSubmit` í•¨ìˆ˜ ìˆ˜ì •

**ì˜ˆìƒ ìˆ˜ì • ì‹œê°„**: 10ë¶„

---

### **ë°©ì•ˆ 3: ì œì¶œ ì‹œ ì¤‘ë³µ í™•ì¸ ìƒëµ (ê°„ë‹¨í•œ ë°©ë²•)**

**ë‚œì´ë„**: â­ (ì‰¬ì›€)  
**íš¨ê³¼**: â­â­â­ (ë¶€ë¶„ í•´ê²°)  
**ì¶”ì²œë„**: â­â­

**ì¥ì :**
- ê°€ì¥ ê°„ë‹¨í•œ ìˆ˜ì •
- ì½”ë“œ ë³€ê²½ ìµœì†Œí™”

**ë‹¨ì :**
- ì œì¶œ ì‹œì ì— ì¤‘ë³µ í™•ì¸ì„ í•˜ì§€ ì•Šì•„ ë³´ì•ˆì„± ì•½ê°„ ì €í•˜
- ë°±ì—”ë“œì—ì„œ ì¤‘ë³µ ì²´í¬ëŠ” ì—¬ì „íˆ ìˆ˜í–‰ë¨
- `onBlur` í™•ì¸ì„ ì•ˆ í•œ ê²½ìš° ë¬¸ì œ ê°€ëŠ¥

**ìˆ˜ì • ë²”ìœ„:**
- `handleSubmit`ì˜ ì¤‘ë³µ í™•ì¸ ì²´í¬ ì œê±°

**ì˜ˆìƒ ìˆ˜ì • ì‹œê°„**: 2ë¶„

---

### **ë°©ì•ˆ 4: ë¡œë”© ìƒíƒœ ì¶”ê°€ + ê²°ê³¼ ë°˜í™˜ ì¡°í•© (ì™„ë²½í•œ UX)**

**ë‚œì´ë„**: â­â­â­ (ì¡°ê¸ˆ ì–´ë ¤ì›€)  
**íš¨ê³¼**: â­â­â­â­â­ (ì™„ë²½ í•´ê²° + UX ê°œì„ )  
**ì¶”ì²œë„**: â­â­â­â­â­

**ì¥ì :**
- ë°©ì•ˆ 1ì˜ ëª¨ë“  ì¥ì 
- ì‚¬ìš©ì ê²½í—˜ í¬ê²Œ ê°œì„ 
- ë¡œë”© ì¤‘ í‘œì‹œë¡œ ëª…í™•í•œ í”¼ë“œë°±

**ë‹¨ì :**
- ìˆ˜ì • ë²”ìœ„ê°€ ì•½ê°„ ë„“ìŒ
- UI ìš”ì†Œ ì¶”ê°€ í•„ìš”

**ìˆ˜ì • ë²”ìœ„:**
- ë°©ì•ˆ 1 + ë¡œë”© ìƒíƒœ ì¶”ê°€
- UIì— ë¡œë”© í‘œì‹œ ì¶”ê°€

**ì˜ˆìƒ ìˆ˜ì • ì‹œê°„**: 20-25ë¶„

---

### **ë°©ì•ˆ 5: Debounce + ìë™ í™•ì¸ + ê²°ê³¼ ë°˜í™˜ (ê°€ì¥ ì™„ë²½)**

**ë‚œì´ë„**: â­â­â­â­ (ì–´ë ¤ì›€)  
**íš¨ê³¼**: â­â­â­â­â­ (ìµœê³  UX)  
**ì¶”ì²œë„**: â­â­â­â­

**ì¥ì :**
- 6ìë¦¬ ì…ë ¥ ì™„ë£Œ ì‹œ ìë™ ì¤‘ë³µ í™•ì¸
- ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ê°ì†Œ
- ì‚¬ìš©ìê°€ ë³„ë„ë¡œ í¬ì»¤ìŠ¤ ì•„ì›ƒí•  í•„ìš” ì—†ìŒ
- ìµœê³ ì˜ ì‚¬ìš©ì ê²½í—˜

**ë‹¨ì :**
- êµ¬í˜„ ë³µì¡ë„ ë†’ìŒ
- ë””ë°”ìš´ìŠ¤ ë¡œì§ ì¶”ê°€ í•„ìš”

**ìˆ˜ì • ë²”ìœ„:**
- ë°©ì•ˆ 1 + Debounce ë¡œì§
- `onChange` í•¸ë“¤ëŸ¬ ìˆ˜ì •
- íƒ€ì´ë¨¸ ê´€ë¦¬

**ì˜ˆìƒ ìˆ˜ì • ì‹œê°„**: 30-40ë¶„

---

## ğŸ¯ ì¶”ì²œ ìˆœì„œ

1. **ë°©ì•ˆ 1** (ê²°ê³¼ ë°˜í™˜) - ê°€ì¥ í™•ì‹¤í•˜ê³  ë¹ ë¥¸ í•´ê²°
2. **ë°©ì•ˆ 4** (ë¡œë”© + ê²°ê³¼ ë°˜í™˜) - ë°©ì•ˆ 1 + UX ê°œì„ 
3. **ë°©ì•ˆ 2** (useRef) - ë¹ ë¥¸ ìˆ˜ì •ì´ í•„ìš”í•  ë•Œ
4. **ë°©ì•ˆ 5** (Debounce) - ì™„ë²½í•œ UXë¥¼ ì›í•  ë•Œ
5. **ë°©ì•ˆ 3** (ê°„ë‹¨ ì œê±°) - ì„ì‹œ ì¡°ì¹˜ìš©

---

## ğŸ“ ê° ë°©ì•ˆ ìƒì„¸ ì½”ë“œ ì˜ˆì‹œ

### ë°©ì•ˆ 1: í•¨ìˆ˜ê°€ ê²°ê³¼ë¥¼ ë°˜í™˜

```javascript
// checkEmployeeNumberAvailability ìˆ˜ì •
const checkEmployeeNumberAvailability = async (employeeNumber) => {
  if (!employeeNumber || !validateEmployeeNumber(employeeNumber)) {
    return { success: false, exists: null, available: false }
  }

  try {
    const USE_MOCK = !import.meta.env.VITE_API_BASE_URL || import.meta.env.VITE_USE_MOCK === 'true'
    
    let exists = false
    if (USE_MOCK) {
      const users = JSON.parse(localStorage.getItem('mock-users') || '[]')
      exists = users.some((u) => u.employeeNumber === employeeNumber)
    } else {
      const response = await authAPI.checkEmployeeNumber(employeeNumber)
      exists = response.exists
    }
    
    const isAvailable = !exists
    setEmployeeNumberChecked(isAvailable)
    
    if (exists) {
      setErrors(prev => ({ ...prev, employeeNumber: 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì§ì›ë²ˆí˜¸ì…ë‹ˆë‹¤.' }))
    } else {
      setErrors(prev => ({ ...prev, employeeNumber: '' }))
    }
    
    return { success: true, exists, available: isAvailable }
  } catch (error) {
    console.error('ì§ì›ë²ˆí˜¸ í™•ì¸ ì‹¤íŒ¨:', error)
    setErrors(prev => ({ 
      ...prev, 
      employeeNumber: 'ì§ì›ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.' 
    }))
    return { success: false, exists: null, available: false, error: error.message }
  }
}

// handleSubmit ìˆ˜ì •
if (!employeeNumberChecked) {
  const result = await checkEmployeeNumberAvailability(formData.employeeNumber)
  if (!result.success || result.exists) {
    return // ì—ëŸ¬ëŠ” ì´ë¯¸ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„¤ì •ë¨
  }
}
```

### ë°©ì•ˆ 2: useRef ì‚¬ìš©

```javascript
// ìƒë‹¨ì— ì¶”ê°€
const employeeNumberCheckedRef = useRef(false)

// checkEmployeeNumberAvailability ìˆ˜ì • (ê¸°ì¡´ê³¼ ë™ì¼í•˜ë˜)
const checkEmployeeNumberAvailability = async (employeeNumber) => {
  // ... ê¸°ì¡´ ì½”ë“œ ...
  employeeNumberCheckedRef.current = !exists  // ì¶”ê°€
  setEmployeeNumberChecked(!exists)
  // ...
}

// handleSubmit ìˆ˜ì •
if (!employeeNumberCheckedRef.current) {
  await checkEmployeeNumberAvailability(formData.employeeNumber)
  if (!employeeNumberCheckedRef.current) {
    setErrors(prev => ({ 
      ...prev, 
      employeeNumber: 'ì§ì›ë²ˆí˜¸ ì¤‘ë³µ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.' 
    }))
    return
  }
}
```

### ë°©ì•ˆ 3: ì œì¶œ ì‹œ ì¤‘ë³µ í™•ì¸ ì œê±°

```javascript
// handleSubmitì—ì„œ ì´ ë¶€ë¶„ ì‚­ì œ
// if (!employeeNumberChecked) {
//   await checkEmployeeNumberAvailability(formData.employeeNumber)
//   if (!employeeNumberChecked) {
//     setErrors({ ...errors, employeeNumber: 'ì§ì›ë²ˆí˜¸ ì¤‘ë³µ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.' })
//     return
//   }
// }
```

---

## ğŸ¤” ì„ íƒ ê°€ì´ë“œ

**ë¹ ë¥´ê²Œ í•´ê²°í•˜ê³  ì‹¶ë‹¤ë©´?** â†’ **ë°©ì•ˆ 1**  
**UXë„ ê°œì„ í•˜ê³  ì‹¶ë‹¤ë©´?** â†’ **ë°©ì•ˆ 4**  
**ìµœì†Œí•œì˜ ìˆ˜ì •ë§Œ ì›í•œë‹¤ë©´?** â†’ **ë°©ì•ˆ 3**  
**ê°€ì¥ ì™„ë²½í•œ ê²½í—˜ì„ ì›í•œë‹¤ë©´?** â†’ **ë°©ì•ˆ 5**

ì–´ë–¤ ë°©ì•ˆìœ¼ë¡œ ìˆ˜ì •í• ì§€ ì•Œë ¤ì£¼ì„¸ìš”!

